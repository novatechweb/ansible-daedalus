---
- name: Start asset server
  docker_container:
    name: buildbot-assets
    image: "httpd:alpine"
    volumes:
    - "/mnt/assets:/usr/local/apache2/htdocs/:ro"
    ports:
    - 80
  register: asset_server

- add_host:
    name: buildbot-assets # required. The hostname/ip of the host to add to the inventory, can include a colon and a port number.
    uri: "http://\
      {{asset_server.ansible_facts.docker_container.NetworkSettings.Gateway}}\
      :{{asset_server.ansible_facts.docker_container.NetworkSettings.Ports['80/tcp'][0].HostPort}}\
      "
