Bottom: 25b065cc46f5866607b5d4846723d364e68b4177
Top:    9190f871a1d6732bffaeaa4b41d924b9b43e8e01
Author: Andrew Cooper <andrew.cooper@novatechweb.com>
Date:   2018-06-26 13:38:54 -0500

Refresh of all-ansible-2.4

---
diff --git a/roles/mariadb/tasks/main.yml b/roles/mariadb/tasks/main.yml
index 698ee95c..b27a0af7 100644
--- a/roles/mariadb/tasks/main.yml
+++ b/roles/mariadb/tasks/main.yml
@@ -3,20 +3,42 @@
     that:
     - mariadb_root_password is defined
 - name: Install MariaDB
-  yum: name={{ item }} state=present
+  yum:
+    name: '{{ item }}'
+    state: present
   with_items:
     - mariadb-server
     - mariadb
 - name: Config MariaDB server
-  template: src=ansible.cnf.j2 dest={{ mariadb_server_config_dir }}/ansible.cnf
-            owner=root group=root mode=0644 backup=yes
+  template:
+    src: ansible.cnf.j2
+    dest: '{{ mariadb_server_config_dir }}/ansible.cnf'
+    owner: root
+    group: root
+    mode: 0644
+    backup: yes
+- name: Set host mysqld bind-address
+  template:
+    src: mariadb-bind-address.j2
+    dest: '{{ mariadb_server_config_dir }}/mariadb-bind-address.cnf'
+    owner: root
+    group: root
+    mode: 0644
+    backup: yes
 - name: Enable and start MariaDB service
-  service: name=mariadb enabled=yes state=started
+  service:
+    name: mariadb
+    enabled: yes
+    state: started
 - name: Check previous installation
-  stat: path={{ mariadb_client_config }}
+  stat:
+    path: '{{ mariadb_client_config }}'
   register: cfg
 - include_tasks: initial_config.yml
   when: cfg.stat.exists is defined and cfg.stat.exists == false
 - name: Open the firewall
-  firewalld: service=mysql permanent=true state=enabled
+  firewalld:
+    service: mysql
+    permanent: true
+    state: enabled
   when: mariadb_open_firewall
